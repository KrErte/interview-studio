/*
Copyright 2025 TASKEXPOSURE

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
*/

.gauge-container {
  position: relative;
  width: 220px;
  height: 220px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.gauge-pulse {
  position: absolute;
  inset: -20px;
  border-radius: 50%;
  opacity: 0;
  transition: opacity 0.5s ease;

  &--active {
    animation: pulse 2s ease-in-out infinite;
  }

  .gauge--low & {
    background: radial-gradient(circle, rgba(74, 222, 128, 0.2) 0%, transparent 70%);
  }

  .gauge--medium & {
    background: radial-gradient(circle, rgba(251, 191, 36, 0.2) 0%, transparent 70%);
  }

  .gauge--high & {
    background: radial-gradient(circle, rgba(248, 113, 113, 0.2) 0%, transparent 70%);
  }
}

.gauge-pulse--active {
  opacity: 1;
}

@keyframes pulse {
  0%, 100% {
    transform: scale(1);
    opacity: 0.5;
  }
  50% {
    transform: scale(1.1);
    opacity: 0.8;
  }
}

.gauge-celebration {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.particle {
  position: absolute;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background-color: var(--color-low-risk);
  animation: celebrate 1.5s ease-out forwards;

  &--1 { top: 50%; left: 50%; animation-delay: 0s; }
  &--2 { top: 50%; left: 50%; animation-delay: 0.1s; }
  &--3 { top: 50%; left: 50%; animation-delay: 0.2s; }
  &--4 { top: 50%; left: 50%; animation-delay: 0.3s; }
  &--5 { top: 50%; left: 50%; animation-delay: 0.4s; }
  &--6 { top: 50%; left: 50%; animation-delay: 0.5s; }
}

@keyframes celebrate {
  0% {
    transform: translate(-50%, -50%) scale(0);
    opacity: 1;
  }
  50% {
    opacity: 1;
  }
  100% {
    opacity: 0;
  }
}

.particle--1 { animation-name: celebrate-1; }
.particle--2 { animation-name: celebrate-2; }
.particle--3 { animation-name: celebrate-3; }
.particle--4 { animation-name: celebrate-4; }
.particle--5 { animation-name: celebrate-5; }
.particle--6 { animation-name: celebrate-6; }

@keyframes celebrate-1 {
  0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
  100% { transform: translate(-80px, -100px) scale(1.5); opacity: 0; }
}

@keyframes celebrate-2 {
  0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
  100% { transform: translate(80px, -90px) scale(1.2); opacity: 0; }
}

@keyframes celebrate-3 {
  0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
  100% { transform: translate(-100px, 20px) scale(1.3); opacity: 0; }
}

@keyframes celebrate-4 {
  0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
  100% { transform: translate(100px, 30px) scale(1.4); opacity: 0; }
}

@keyframes celebrate-5 {
  0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
  100% { transform: translate(-60px, 90px) scale(1.1); opacity: 0; }
}

@keyframes celebrate-6 {
  0% { transform: translate(-50%, -50%) scale(0); opacity: 1; }
  100% { transform: translate(70px, 85px) scale(1.6); opacity: 0; }
}

.gauge-warning {
  position: absolute;
  inset: -10px;
  border-radius: 50%;
  box-shadow: 0 0 30px rgba(248, 113, 113, 0.5), 0 0 60px rgba(248, 113, 113, 0.3);
  animation: warning-pulse 1.5s ease-in-out infinite;
}

@keyframes warning-pulse {
  0%, 100% {
    box-shadow: 0 0 30px rgba(248, 113, 113, 0.5), 0 0 60px rgba(248, 113, 113, 0.3);
  }
  50% {
    box-shadow: 0 0 50px rgba(248, 113, 113, 0.7), 0 0 80px rgba(248, 113, 113, 0.4);
  }
}

.gauge-svg {
  width: 100%;
  height: 100%;
  transform: rotate(0deg);
}

.gauge-bg {
  stroke: var(--color-surface);
}

.gauge-progress {
  transition: stroke-dashoffset 0.1s ease-out;

  &--low {
    stroke: var(--color-low-risk);
  }

  &--medium {
    stroke: var(--color-medium-risk);
  }

  &--high {
    stroke: var(--color-high-risk);
  }
}

.gauge-glow {
  opacity: 0.3;
  filter: blur(4px);

  &--low {
    stroke: var(--color-low-risk);
  }

  &--medium {
    stroke: var(--color-medium-risk);
  }

  &--high {
    stroke: var(--color-high-risk);
  }
}

.gauge-center {
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.gauge-score {
  font-size: 3.5rem;
  font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Mono', 'Droid Sans Mono', monospace;
  font-weight: 700;
  line-height: 1;

  &--low {
    color: var(--color-low-risk);
  }

  &--medium {
    color: var(--color-medium-risk);
  }

  &--high {
    color: var(--color-high-risk);
  }
}

.gauge-percent {
  font-size: 1.5rem;
  font-weight: 500;
  opacity: 0.8;
}

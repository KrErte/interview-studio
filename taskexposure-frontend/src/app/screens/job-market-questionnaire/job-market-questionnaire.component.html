<!--
Copyright 2025 TASKEXPOSURE

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<div class="questionnaire">
  <div class="questionnaire__content">
    <!-- Header -->
    <div class="questionnaire__header">
      <button type="button" class="questionnaire__back" (click)="onBack()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
        Back
      </button>
      <span class="questionnaire__step">Step 2 of 3</span>
    </div>

    <h1 class="questionnaire__title">5 quick questions</h1>
    <p class="questionnaire__subtitle">This helps us give you an accurate assessment.</p>

    <!-- Progress -->
    <div class="questionnaire__progress">
      <div class="questionnaire__progress-bar">
        <div
          class="questionnaire__progress-fill"
          [style.width.%]="(answeredCount / 5) * 100"
        ></div>
      </div>
      <span class="questionnaire__progress-text">{{ answeredCount }} of 5 answered</span>
    </div>

    <!-- Questions -->
    <div class="questionnaire__questions">
      <!-- Q1: Role Target -->
      <div class="questionnaire__question">
        <h2 class="questionnaire__question-title">
          <span class="questionnaire__question-number">1</span>
          What role are you targeting right now?
        </h2>
        <div class="questionnaire__options">
          @for (option of roleTargetOptions; track option.value) {
            <label
              class="questionnaire__option"
              [class.questionnaire__option--selected]="roleTarget === option.value"
            >
              <input
                type="radio"
                name="roleTarget"
                [value]="option.value"
                [(ngModel)]="roleTarget"
                hidden
              />
              <span class="questionnaire__option-radio"></span>
              <span class="questionnaire__option-label">{{ option.label }}</span>
            </label>
          }
        </div>
      </div>

      <!-- Q2: Last Work Timing -->
      <div class="questionnaire__question">
        <h2 class="questionnaire__question-title">
          <span class="questionnaire__question-number">2</span>
          When did you last work in this role professionally?
        </h2>
        <div class="questionnaire__options">
          @for (option of lastWorkTimingOptions; track option.value) {
            <label
              class="questionnaire__option"
              [class.questionnaire__option--selected]="lastWorkTiming === option.value"
            >
              <input
                type="radio"
                name="lastWorkTiming"
                [value]="option.value"
                [(ngModel)]="lastWorkTiming"
                hidden
              />
              <span class="questionnaire__option-radio"></span>
              <span class="questionnaire__option-label">{{ option.label }}</span>
            </label>
          }
        </div>
      </div>

      <!-- Q3: Urgency -->
      <div class="questionnaire__question">
        <h2 class="questionnaire__question-title">
          <span class="questionnaire__question-number">3</span>
          How urgent is finding a new job?
        </h2>
        <div class="questionnaire__options">
          @for (option of urgencyOptions; track option.value) {
            <label
              class="questionnaire__option"
              [class.questionnaire__option--selected]="urgency === option.value"
            >
              <input
                type="radio"
                name="urgency"
                [value]="option.value"
                [(ngModel)]="urgency"
                hidden
              />
              <span class="questionnaire__option-radio"></span>
              <span class="questionnaire__option-label">{{ option.label }}</span>
            </label>
          }
        </div>
      </div>

      <!-- Q4: Work Examples -->
      <div class="questionnaire__question">
        <h2 class="questionnaire__question-title">
          <span class="questionnaire__question-number">4</span>
          Do you have concrete work examples from the last 12 months?
        </h2>
        <div class="questionnaire__options">
          @for (option of workExamplesOptions; track option.value) {
            <label
              class="questionnaire__option"
              [class.questionnaire__option--selected]="workExamples === option.value"
            >
              <input
                type="radio"
                name="workExamples"
                [value]="option.value"
                [(ngModel)]="workExamples"
                hidden
              />
              <span class="questionnaire__option-radio"></span>
              <span class="questionnaire__option-label">{{ option.label }}</span>
            </label>
          }
        </div>
      </div>

      <!-- Q5: Main Blocker -->
      <div class="questionnaire__question">
        <h2 class="questionnaire__question-title">
          <span class="questionnaire__question-number">5</span>
          What's blocking you the most right now?
        </h2>
        <div class="questionnaire__options">
          @for (option of mainBlockerOptions; track option.value) {
            <label
              class="questionnaire__option"
              [class.questionnaire__option--selected]="mainBlocker === option.value"
            >
              <input
                type="radio"
                name="mainBlocker"
                [value]="option.value"
                [(ngModel)]="mainBlocker"
                hidden
              />
              <span class="questionnaire__option-radio"></span>
              <span class="questionnaire__option-label">{{ option.label }}</span>
            </label>
          }
        </div>
      </div>
    </div>

    <!-- Continue Button -->
    <button
      type="button"
      class="questionnaire__continue"
      [disabled]="!isComplete"
      (click)="onContinue()"
    >
      See my results
      <span class="questionnaire__continue-arrow">&rarr;</span>
    </button>
  </div>
</div>
